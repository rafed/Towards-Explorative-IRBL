bug_id,bug_report_analysis,suspicious_files,fixed_files
mwaskom__seaborn-3010,"The bug report indicates that the `PolyFit` function is not robust to missing data, particularly when a list containing a `None` value is passed in. The relevant line of code in the traceback shows `so.Plot([1, 2, 3, None, 4], [1, 2, 3, 4, 5]).add(so.Line(), so.PolyFit())`. The error message raised is a `LinAlgError` suggesting that a linear algebra operation (from NumPy) did not converge, indicating potential issues with the matrix being ill-defined due to the presence of null values in the input data.","{""ranked_list"": [{""file"": ""seaborn/_stats/regression.py"", ""justification"": ""This file contains the implementation of the PolyFit method, specifically the _fit_predict method that is directly related to fitting polynomial curves. The implementation involves using NumPy's polyfit which is sensitive to missing data, as indicated in the bug report.""}, {""file"": ""seaborn/_core/plot.py"", ""justification"": ""The Plot class likely integrates components such as PolyFit when creating plots. The _compute_stats method here suggests it handles data and statistical computations, which is relevant when inputs contain missing values.""}, {""file"": ""seaborn/_core/groupby.py"", ""justification"": ""This file deals with grouping data which is essential for handling datasets where missing values could lead to erroneous behavior when applying functions like PolyFit.""}, {""file"": ""seaborn/_core/data.py"", ""justification"": ""This file is responsible for managing data sources and variables, which may involve cleansing or preprocessing data to deal with missing values prior to plotting or analysis.""}, {""file"": ""seaborn/utils.py"", ""justification"": ""Contains utility functions that may assist with data manipulation or pre-processing steps, which can be relevant in scenarios where missing data must be handled.""}, {""file"": ""seaborn/distributions.py"", ""justification"": ""While focused on distributions, it includes functions that may indirectly interact with data used in regression analysis and plotting.""}, {""file"": ""seaborn/categorical.py"", ""justification"": ""This file handles categorical data plotting which might also need to consider how missing data is managed in visualizations.""}, {""file"": ""seaborn/miscplot.py"", ""justification"": ""Includes auxiliary plotting functions that might be indirectly linked to how different data types, including those with missing values, are visualized.""}, {""file"": ""seaborn/algorithms.py"", ""justification"": ""Contains algorithms that could be used for analysis or preprocessing that would relate to managing data before plotting and regression.""}, {""file"": ""seaborn/regression.py"", ""justification"": ""This file likely includes other regression-related functionalities that might impact or be impacted by the handling of missing data when applying statistical methods.""}]}",['seaborn/_stats/regression.py']
mwaskom__seaborn-3190,"The bug report discusses a failure related to color mapping in a plotting context, specifically when dealing with boolean values. When attempting to subtract two boolean values in the plotting library, a `TypeError` occurs, indicating that the `-` operator is not supported for boolean data. The tracebacks lead to files `plot.py`, `scales.py`, and `bar.py` where the problems may originate. The Plot class in the seaborn library is likely involved, particularly methods that set up scales and handle data transformations for plots. The error indicates that the handling of boolean data in the context of numerical operations isnâ€™t being done correctly, which calls for investigating how scales are set up and how transformations are applied to data in the plot method(s). Relevant method names such as `._setup_scales()` and `get_mapping()` for mapping values to scales will warrant examination as they are likely involved in the improper handling of boolean data.","{""ranked_list"": [{""file"": ""seaborn/_core/plot.py"", ""justification"": ""Contains the primary plotting logic, including the method 'plot' which compiles the plot specification and utilizes the method '_setup_scales' that manages how data is handled for plotting. Classically handles plot data and should include methods responsive to boolean inputs.""}, {""file"": ""seaborn/_core/scales.py"", ""justification"": ""This file contains methods related to the scaling of data for plots, including how to set up for boolean and other data types. The method '_setup()' specifically deals with defining how data maps to visual scale.""}, {""file"": ""seaborn/_marks/bar.py"", ""justification"": ""The bar plot handling, including the method '_plot()', might be relevant since it directly deals with how plotted values are represented \u2013 including their mapping which might get affected by boolean values.""}, {""file"": ""seaborn/_core/properties.py"", ""justification"": ""Includes the method 'get_mapping()', which deals with how values are translated for plotting. Since the issue pertains to handling boolean data/numbers, this mapping process is suspect.""}, {""file"": ""seaborn/categorical.py"", ""justification"": ""Method 'plot()' may also be involved as it handles categorical plotting. Understanding this allows insight into how categorical data, including booleans, are managed visually.""}, {""file"": ""seaborn/_core/data.py"", ""justification"": ""Holds methods related to data preparation before it even reaches plotting. Exploring how data sourcing is structured may uncover why boolean values fail during plotting.""}, {""file"": ""seaborn/relational.py"", ""justification"": ""Relational plots might call the same scaling and plotting methods, so checking this can confirm whether similar issues arise in different contexts.""}, {""file"": ""seaborn/widgets.py"", ""justification"": ""Possibly interacts with user input for graphical plots, hence it may indirectly be involved in how boolean values are received and processed.""}, {""file"": ""seaborn/utils.py"", ""justification"": ""General utility functions may involve type handling that contributes to the overall data processing pipeline for plotting functions.""}, {""file"": ""seaborn/miscplot.py"", ""justification"": ""Could involve miscellaneous plotting techniques that include handling data types, specifically in edge cases like boolean handling.""}]}",['seaborn/_core/scales.py']
mwaskom__seaborn-3407,"The bug report indicates that the `pairplot` function in the Seaborn library raises a `KeyError` when applied to a pandas MultiIndex DataFrame. The sample code demonstrates the problem when calling `sns.pairplot()` on such a DataFrame structure. The specific part of the traceback that shows the `KeyError` indicates that the function expects keys matching the DataFrame's columns, highlighting a possible issue in how Seaborn accesses DataFrame columns with MultiIndex. A workaround mentioned involves flattening the DataFrame's column index, suggesting the issue may stem from the handling of MultiIndex in plotting functions. The core components inferred from the report are: 
- **Seaborn Functions**: Particularly `pairplot`, which is clearly indicated. 
- **Pandas DataFrame**: The bug specifically relates to MultiIndex DataFrames. The error root may lie within how the Seaborn plotting functions parse DataFrame structures for plotting.","{""ranked_list"": [{""file"": ""seaborn/axisgrid.py"", ""justification"": ""The `pairplot` method is defined here and is directly responsible for plotting pairwise relationships. This makes it highly relevant to the bug report. Code logic reveals it constructs a grid of plots based on DataFrame columns and potentially mishandles MultiIndex columns, leading to the `KeyError`. It should be the primary file to examine.""}, {""file"": ""seaborn/_core/plot.py"", ""justification"": ""Contains a method `pair` which, while not directly mentioned in the bug, suggests functionality to pair multiple `x` or `y` variables, further indicating potential complexity in handling DataFrames for plotting. Relevant due to the interrelated nature of plotting multiple variables.""}, {""file"": ""seaborn/_core/data.py"", ""justification"": ""New datasets are constructed within this file, and the method `join` is critical for managing variable inclusion in plots. This may affect how `pairplot` handles MultiIndex DataFrames, thus linking it to the observed bug.""}, {""file"": ""seaborn/_core/exceptions.py"", ""justification"": ""The `_during` method might help with error handling and could provide insight into the failure process during plotting, especially if exceptions aren't managed well when accessing DataFrame columns.""}, {""file"": ""seaborn/_core/scales.py"", ""justification"": ""Responsible for setting scale and locators, which influences how data is formatted and displayed in plots. Issues could arise from incorrect scaling in the presence of MultiIndex, warranting investigation.""}, {""file"": ""seaborn/_core/moves.py"", ""justification"": ""This file includes functions for manipulating DataFrame structures during plotting functions. Any operations that modify or access DataFrame columns could relate to the `KeyError`.""}, {""file"": ""seaborn/_stats/base.py"", ""justification"": ""Functions here may handle grouping and data checks that interact with how DataFrame indices are accessed or modified, making it potentially relevant to the error described.""}, {""file"": ""seaborn/_stats/order.py"", ""justification"": ""If elements related to the DataFrame columns or rows are ordered in a way that conflicts with MultiIndex handling, it might be relevant.""}, {""file"": ""seaborn/_marks/base.py"", ""justification"": ""This file is responsible for the graphical representation and might provide insight into how the data is visualized, which can relate back to the original bug in how the data structure leads to a `KeyError`.""}]}",['seaborn/axisgrid.py']
mwaskom__seaborn-2848,"The bug report indicates an issue with the `pairplot` functionality in Seaborn 0.11.1, where passing a `hue_order` list that excludes some hue values leads to a TypeError. The relevant methods and potential files include those related to plotting and handling data in Seaborn. Key keywords for file searches include `pairplot`, `hue`, `hue_order`, and `TypeError`. Affected components likely relate to plotting (`pairplot`, `_core`, `axisgrid`, etc.), and data handling methods.","{""ranked_list"": [{""file"": ""seaborn/_core/plot.py"", ""justification"": ""Contains the `pair` method that defines how to create pair plots, which directly relates to the reported bug with `pairplot` functionality.""}, {""file"": ""seaborn/axisgrid.py"", ""justification"": ""Defines grid-based plotting functions, including `set_axis_labels`, which is used under the hood for pair plots, thus relevant to the issue.""}, {""file"": ""seaborn/relational.py"", ""justification"": ""Includes `scatterplot`, which is similar to the functionality that `pairplot` employs for data visualization. Potentially linked to handling hue values.""}, {""file"": ""seaborn/categorical.py"", ""justification"": ""Contains methods that work with categorical data and hue handling, particularly the `boxplot` which may involve similar underlying logic.""}, {""file"": ""seaborn/_core/data.py"", ""justification"": ""Handles initialization of data, potentially affecting how data is accessed in plotting functions like `pairplot` when providing hue values.""}, {""file"": ""seaborn/utils.py"", ""justification"": ""Provides utility functions that may help with data operations or visualization settings in plotting, relevant for understanding the data setup.""}, {""file"": ""seaborn/_core/subplots.py"", ""justification"": ""Might include subplot arrangements which are essential when rendering plots in multiple axes.""}, {""file"": ""seaborn/_core/scales.py"", ""justification"": ""Handles scale management which can affect how hue values are represented in plots.""}, {""file"": ""seaborn/_oldcore.py"", ""justification"": ""Legacy handling around plotting that may still influence current plotting functionalities.""}, {""file"": ""seaborn/miscplot.py"", ""justification"": ""May have miscellaneous plotting functions that relate to the `pairplot` functionality, especially if they share similar plotting logic.""}]}",['seaborn/_oldcore.py']
