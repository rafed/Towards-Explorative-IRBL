bug_id,bug_report_analysis,suspicious_files,fixed_files
mwaskom__seaborn-3010,"The bug report indicates that the `PolyFit` function does not handle missing data robustly. The error traceback shows a `LinAlgError` caused by the `numpy.polyfit` function failing to converge due to the presence of `None` values in input data. This infers that the data preprocessing or validation in the `PolyFit` implementation does not account for missing values, leading to runtime failures when such values are encountered. The relevant components involved in this bug are the statistical regression mechanics, specifically the handling of data inputs for polynomial fitting methods and the plotting functionalities that are present in the Seaborn library.","{""ranked_list"": [{""file"": ""seaborn/_stats/regression.py"", ""justification"": ""Contains the `PolyFit` related methods with critical logic in `_fit_predict`, which directly references `numpy.polyfit` where the error occurs. It handles data fitting functions that can be affected by missing values.""}, {""file"": ""seaborn/_core/plot.py"", ""justification"": ""Contains plotting mechanisms and data handling that could influence the behavior of `PolyFit`. The `_compute_stats` method indicates statistical processing relevant to plotting errors arising from `None` values.""}, {""file"": ""seaborn/_core/groupby.py"", ""justification"": ""Houses grouping functionality that may interact with `PolyFit` and its application of statistical transformations. The `apply` method here plays an essential role in how data is processed before fits.""}, {""file"": ""seaborn/_core/data.py"", ""justification"": ""Defines data structures and checks that can affect how inputs are managed before statistical methods are called, potentially relating to how missing values are handled during fitting operations.""}, {""file"": ""seaborn/_core/scales.py"", ""justification"": ""Manages scaling of data, which can influence how `PolyFit` operates on input data\u2014especially concerning invalid or missing values in the dataset.""}]}",['seaborn/_stats/regression.py']
mwaskom__seaborn-3407,"The bug report indicates that calling `pairplot` from the Seaborn library raises a `KeyError` when the input is a MultiIndex DataFrame. Core keywords from the report include ""pairplot"", ""KeyError"", and ""MultiIndex DataFrame"". The stack trace provides pathways through the Seaborn library files, highlighting that the error originates from the handling of DataFrame columns during plotting, specifically when they are structured as a MultiIndex. Potentially related components that might be affected include data handling methods, plotting methods, and any utilities that process DataFrames within Seaborn. The One proposed workaround in the report suggests flattening the DataFrame columns, indicating that column handling is essential in resolving the error.","{""ranked_list"": [{""file"": ""seaborn/axisgrid.py"", ""justification"": ""The `pairplot` function is defined here and is directly linked to the bug report. The logic of `pairplot` could contain flaws when handling MultiIndex DataFrames, likely contributing to the `KeyError`. ""}, {""file"": ""seaborn/regression.py"", ""justification"": ""Contains methods `regplot` and `lmplot`, which might indirectly interact with `pairplot` when regression lines or mappings are involved in the visual representation of data. It is plausible that these methods do not fully support MultiIndex structures, thus playing a role in the bug.""}, {""file"": ""seaborn/distributions.py"", ""justification"": ""This file contains methods for plotting various distributions, including `kdeplot` and `histplot`, which may be invoked during the diagonal mappings of the pairplot. Any issues with handling multi-indexing during density estimation or histogram generation may correlate with the `KeyError`.""}, {""file"": ""seaborn/_core/data.py"", ""justification"": ""Data handling is pivotal for constructing plots in Seaborn. This file may contain logic that determines how DataFrames are processed, which could lead to issues when multi-indexed DataFrames are passed to functions that expect simpler structures.""}, {""file"": ""seaborn/_core/properties.py"", ""justification"": ""Defines how properties are fetched and mapped, which could influence plotting behavior in functions like `pairplot`. Issues in property assignments when interacting with DataFrames could be a source of the problem.""}, {""file"": ""seaborn/_core/scales.py"", ""justification"": ""Involved in the scaling of data, which is particularly relevant for visualizations. If scales are not appropriately set for MultiIndex DataFrames, it may result in unexpected errors during plotting.""}, {""file"": ""seaborn/_core/exceptions.py"", ""justification"": ""Contains exception handling logic which may interact with error generation in related methods. While indirectly connected, it may influence feedback provided when errors occur.""}, {""file"": ""seaborn/_core/moves.py"", ""justification"": ""Might include mechanics for managing how plots respond to user inputs, which can surface in scenarios of complex DataFrame structures like MultiIndexes.""}, {""file"": ""seaborn/_oldcore.py"", ""justification"": ""Contains legacy code that may still be referenced by newer plotting utilities; any residual handling behavior could lead to errors when using standard functions with complex data formats.""}, {""file"": ""seaborn/_testing.py"", ""justification"": ""If testing utilities are implemented for the `pairplot`, debugging or error-checking mechanisms might provide insights \u2014 the analysis may reveal how edge cases like MultiIndex DataFrames are managed.""}]}",['seaborn/axisgrid.py']
mwaskom__seaborn-3190,"The bug report highlights a failure in color mapping when using boolean values in a plotting function. The critical line in the traceback indicates a TypeError caused by attempting to perform a subtraction operation on boolean data types. Keywords such as 'color mapping', 'boolean data', 'TypeError', and method names related to plotting and scales were extracted. The affected components are primarily the plotting functions and the function responsible for handling scales, as they deal with the mapping of color based on data inputs. Mentioned methods that are important for analysis include '_setup_scales', '_plot', and related methods in the Plotter and scale classes.","{""ranked_list"": [{""file"": ""seaborn/_core/plot.py"", ""justification"": ""Contains the '_plot' method which calls '_setup_scales', where the color mapping logic is likely being executed, thus directly relevant to the boolean data handling issue.""}, {""file"": ""seaborn/_core/scales.py"", ""justification"": ""Defines the '_setup' method which involves setting up scales and may deal with the boolean inputs when setting color properties, closely tied to the error reported.""}, {""file"": ""seaborn/_marks/bar.py"", ""justification"": ""The 'bar' plot type is invoked in the example, with its '_plot' method integrating color mapping logic which could be directly influenced by the boolean data.""}, {""file"": ""seaborn/_core/properties.py"", ""justification"": ""Includes the 'get_mapping' method which notes issues with handling boolean data mapping; it provides insight into how the boolean values are processed.""}, {""file"": ""seaborn/_marks/line.py"", ""justification"": ""While focused on line plots, this may share logic similar to bars regarding color and boolean data handling within the '_plot' method.""}, {""file"": ""seaborn/_marks/dot.py"", ""justification"": ""Similar to the bar and line methods, it has a plot method that may influence how boolean data impacts rendering.""}, {""file"": ""seaborn/_marks/area.py"", ""justification"": ""Also contains a '_plot' method that deals with data visualization and may intersect with color mapping in the context of boolean data.""}, {""file"": ""seaborn/_marks/base.py"", ""justification"": ""Implements a generic '_plot' method which serves as the base for other plotting methods, so errors in color handling can likely propagate from here.""}, {""file"": ""seaborn/_testing.py"", ""justification"": ""Could contain tests related to plotting and color behavior which might provide insight into how boolean values are being processed or handled.""}]}",['seaborn/_core/scales.py']
mwaskom__seaborn-2848,"The bug report describes an issue with the 'pairplot' function from Seaborn 0.11.1 where the 'hue_order' option no longer accepts a subset of hue values without raising an error. Previously, it was possible to plot only certain species of the iris dataset using the 'hue_order' parameter, but this functionality has broken in the new version. The raised error is a `TypeError` related to handling NaN values, indicating a potential flaw in input validation or processing within the plotting function. The components involved are primarily related to plotting, specifically the handling of coordinate axes and iterative plotting based on data groupings and aesthetics. The report emphasizes that the bug occurs with specific conditions related to the hue column and should ideally still support missing values without causing an error.","{""ranked_list"": [{""file"": ""seaborn/axisgrid.py"", ""justification"": ""This file houses the main functionality for the 'pairplot' method, which is central to the bug report. The file contains logic for initializing the plot and processing the hue data, which was directly referenced in the report.""}, {""file"": ""seaborn/_core/plot.py"", ""justification"": ""Related to the construction of plots and handling of data; it likely provides foundational methods that pairplot utilizes, making it relevant for understanding how hue_order issues might propagate.""}, {""file"": ""seaborn/relational.py"", ""justification"": ""Contains methods for creating scatterplots and lineplots which also use hue parameters. This could offer additional context or show cascading effects on other plotting methods if errors arise.""}, {""file"": ""seaborn/categorical.py"", ""justification"": ""Potentially relevant as it handles categorical data plotting\u2014may interact with hue parameters based on the bug's description.""}, {""file"": ""seaborn/utils.py"", ""justification"": ""May include utility functions that assist with data verification or manipulation; could have methods that are indirectly related to the hue handling in plots.""}, {""file"": ""seaborn/distributions.py"", ""justification"": ""Although primarily for distribution plots, it could have interactions with how data is processed across different plot functions.""}, {""file"": ""seaborn/miscplot.py"", ""justification"": ""Could contain miscellaneous plotting functions that ultimately impact the overall plotting behavior of the seaborn library.""}, {""file"": ""seaborn/palettes.py"", ""justification"": ""If color palettes are incorrectly created or accessed, they might affect how hue data is visually represented, which aligns with the report's focus.""}, {""file"": ""seaborn/_core/properties.py"", ""justification"": ""Could hold property definitions related to the hue parameter that might directly impact its handling.""}, {""file"": ""seaborn/_oldcore.py"", ""justification"": ""If any backward compatibility is retained in the old core, it might offer insight into expected or deprecated behaviors of methods.""}]}",['seaborn/_oldcore.py']
